<!DOCTYPE html>
<html lang="{{_locale}}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{t 'purchaseOrder'}} - {{documentNumber}}</title>
  {{> styles}}
</head>
<body>
  <div class="document">
    <!-- Header -->
    {{> document-header
        documentTitle=(t 'purchaseOrder')
        documentNumber=documentNumber
        documentDate=orderDate
        documentDateLabel=(t 'orderDate')
        status=status
        organization=organization
    }}

    <!-- Vendor Info and Order Details -->
    <div class="info-grid">
      {{> address-block
          title=(t 'vendor')
          contact=vendor
          address=vendor.billingAddress
      }}

      <div class="document-info-box">
        <div class="info-row">
          <span class="info-label">{{t 'orderDate'}}</span>
          <span class="info-value">{{formatDate orderDate}}</span>
        </div>
        {{#ifExists expectedDate}}
        <div class="info-row">
          <span class="info-label">{{t 'expectedDate'}}</span>
          <span class="info-value">{{formatDate expectedDate}}</span>
        </div>
        {{/ifExists}}
        <div class="info-row">
          <span class="info-label">{{t 'orderStatus'}}</span>
          <span class="info-value">{{status}}</span>
        </div>
        {{#ifExists vendor.taxNumber}}
        <div class="info-row">
          <span class="info-label">{{t 'vendorSstNo'}}</span>
          <span class="info-value">{{vendor.taxNumber}}</span>
        </div>
        {{/ifExists}}
      </div>
    </div>

    {{#ifExists vendor.shippingAddress}}
    <!-- Delivery Address -->
    <div class="info-grid" style="margin-top: -15px;">
      {{> address-block
          title=(t 'deliverTo')
          contact=vendor
          address=vendor.shippingAddress
      }}
      <div></div>
    </div>
    {{/ifExists}}

    <!-- Line Items -->
    {{> line-items-table items=items showDiscount=true}}

    <!-- Totals -->
    {{> totals-section
        subtotal=subtotal
        discountAmount=discountAmount
        shippingCharges=shippingCharges
        taxAmount=taxAmount
        total=total
    }}

    <!-- Delivery Instructions -->
    {{#ifExists deliveryInstructions}}
    <div class="delivery-section">
      <div class="delivery-title">{{t 'deliveryInstructions'}}</div>
      <div class="delivery-content">{{deliveryInstructions}}</div>
    </div>
    {{/ifExists}}

    <!-- Notes -->
    {{#ifExists notes}}
    <div class="notes-section">
      <div class="notes-title">{{t 'notes'}}</div>
      <div class="notes-content">{{notes}}</div>
    </div>
    {{/ifExists}}

    <!-- Terms and Conditions -->
    {{#ifExists termsConditions}}
    <div class="terms-section">
      <div class="terms-title">{{t 'termsAndConditions'}}</div>
      <div class="terms-content">{{termsConditions}}</div>
    </div>
    {{/ifExists}}

    <!-- Signature Section -->
    <div class="signature-section">
      <div class="signature-box">
        <div class="signature-line"></div>
        <div class="signature-label">{{t 'authorizedSignature'}}</div>
      </div>
      <div class="signature-box">
        <div class="signature-line"></div>
        <div class="signature-label">{{t 'vendor'}}</div>
      </div>
    </div>

    <!-- Footer -->
    {{> document-footer organization=organization}}
  </div>
</body>
</html>
